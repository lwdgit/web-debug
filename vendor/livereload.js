(function() {
var __customevents = {}, __protocol = {}, __connector = {}, __timer = {}, __options = {}, __reloader = {}, __livereload = {}, __less = {}, __startup = {};

// customevents
var CustomEvents;
CustomEvents = {
  bind: function(element, eventName, handler) {
    if (element.addEventListener) {
      return element.addEventListener(eventName, handler, false);
    } else if (element.attachEvent) {
      element[eventName] = 1;
      return element.attachEvent('onpropertychange', function(event) {
        if (event.propertyName === eventName) {
          return handler();
        }
      });
    } else {
      throw new Error("Attempt to attach custom event " + eventName + " to something which isn't a DOMElement");
    }
  },
  fire: function(element, eventName) {
    var event;
    if (element.addEventListener) {
      event = document.createEvent('HTMLEvents');
      event.initEvent(eventName, true, true);
      return document.dispatchEvent(event);
    } else if (element.attachEvent) {
      if (element[eventName]) {
        return element[eventName]++;
      }
    } else {
      throw new Error("Attempt to fire custom event " + eventName + " on something which isn't a DOMElement");
    }
  }
};
__customevents.bind = CustomEvents.bind;
__customevents.fire = CustomEvents.fire;

// protocol
var PROTOCOL_6, PROTOCOL_7, Parser, ProtocolError;
var __indexOf = Array.prototype.indexOf || function(item) {
  for (var i = 0, l = this.length; i < l; i++) {
    if (this[i] === item) return i;
  }
  return -1;
};
__protocol.PROTOCOL_6 = PROTOCOL_6 = 'http://livereload.com/protocols/official-6';
__protocol.PROTOCOL_7 = PROTOCOL_7 = 'http://livereload.com/protocols/official-7';
__protocol.ProtocolError = ProtocolError = (function() {
  function ProtocolError(reason, data) {
    this.message = "LiveReload protocol error (" + reason + ") after receiving data: \"" + data + "\".";
  }
  return ProtocolError;
})();
__protocol.Parser = Parser = (function() {
  function Parser(handlers) {
    this.handlers = handlers;
    this.reset();
  }
  Parser.prototype.reset = function() {
    return this.protocol = null;
  };
  Parser.prototype.process = function(data) {
    var command, message, options, _ref;
    try {
      if (!(this.protocol != null)) {
        if (data.match(/^!!ver:([\d.]+)$/)) {
          this.protocol = 6;
        } else if (message = this._parseMessage(data, ['hello'])) {
          if (!message.protocols.length) {
            throw new ProtocolError("no protocols specified in handshake message");
          } else if (__indexOf.call(message.protocols, PROTOCOL_7) >= 0) {
            this.protocol = 7;
          } else if (__indexOf.call(message.protocols, PROTOCOL_6) >= 0) {
            this.protocol = 6;
          } else {
            throw new ProtocolError("no supported protocols found");
          }
        }
        return this.handlers.connected(this.protocol);
      } else if (this.protocol === 6) {
        message = JSON.parse(data);
        if (!message.length) {
          throw new ProtocolError("protocol 6 messages must be arrays");
        }
        command = message[0], options = message[1];
        if (command !== 'refresh') {
          throw new ProtocolError("unknown protocol 6 command");
        }
        return this.handlers.message({
          command: 'reload',
          path: options.path,
          liveCSS: (_ref = options.apply_css_live) != null ? _ref : true
        });
      } else {
        message = this._parseMessage(data, ['reload', 'alert']);
        return this.handlers.message(message);
      }
    } catch (e) {
      if (e instanceof ProtocolError) {
        return this.handlers.error(e);
      } else {
        throw e;
      }
    }
  };
  Parser.prototype._parseMessage = function(data, validCommands) {
    var message, _ref;
    try {
      message = JSON.parse(data);
    } catch (e) {
      throw new ProtocolError('unparsable JSON', data);
    }
    if (!message.command) {
      throw new ProtocolError('missing "command" key', data);
    }
    if (_ref = message.command, __indexOf.call(validCommands, _ref) < 0) {
      throw new ProtocolError("invalid command '" + message.command + "', only valid commands are: " + (validCommands.join(', ')) + ")", data);
    }
    return message;
  };
  return Parser;
})();

// connector
// Generated by CoffeeScript 1.3.3
var Connector, PROTOCOL_6, PROTOCOL_7, Parser, Version, _ref;

_ref = __protocol, Parser = _ref.Parser, PROTOCOL_6 = _ref.PROTOCOL_6, PROTOCOL_7 = _ref.PROTOCOL_7;

Version = '2.0.8';

__connector.Connector = Connector = (function() {

  function Connector(options, WebSocket, Timer, handlers) {
    var _this = this;
    this.options = options;
    this.WebSocket = WebSocket;
    this.Timer = Timer;
    this.handlers = handlers;
    this._uri = "ws://" + this.options.host + ":" + this.options.port + "/livereload";
    this._nextDelay = this.options.mindelay;
    this._connectionDesired = false;
    this.protocol = 0;
    this.protocolParser = new Parser({
      connected: function(protocol) {
        _this.protocol = protocol;
        _this._handshakeTimeout.stop();
        _this._nextDelay = _this.options.mindelay;
        _this._disconnectionReason = 'broken';
        return _this.handlers.connected(protocol);
      },
      error: function(e) {
        _this.handlers.error(e);
        return _this._closeOnError();
      },
      message: function(message) {
        return _this.handlers.message(message);
      }
    });
    this._handshakeTimeout = new Timer(function() {
      if (!_this._isSocketConnected()) {
        return;
      }
      _this._disconnectionReason = 'handshake-timeout';
      return _this.socket.close();
    });
    this._reconnectTimer = new Timer(function() {
      if (!_this._connectionDesired) {
        return;
      }
      return _this.connect();
    });
    this.connect();
  }

  Connector.prototype._isSocketConnected = function() {
    return this.socket && this.socket.readyState === this.WebSocket.OPEN;
  };

  Connector.prototype.connect = function() {
    var _this = this;
    this._connectionDesired = true;
    if (this._isSocketConnected()) {
      return;
    }
    this._reconnectTimer.stop();
    this._disconnectionReason = 'cannot-connect';
    this.protocolParser.reset();
    this.handlers.connecting();
    this.socket = new this.WebSocket(this._uri);
    this.socket.onopen = function(e) {
      return _this._onopen(e);
    };
    this.socket.onclose = function(e) {
      return _this._onclose(e);
    };
    this.socket.onmessage = function(e) {
      return _this._onmessage(e);
    };
    return this.socket.onerror = function(e) {
      return _this._onerror(e);
    };
  };

  Connector.prototype.disconnect = function() {
    this._connectionDesired = false;
    this._reconnectTimer.stop();
    if (!this._isSocketConnected()) {
      return;
    }
    this._disconnectionReason = 'manual';
    return this.socket.close();
  };

  Connector.prototype._scheduleReconnection = function() {
    if (!this._connectionDesired) {
      return;
    }
    if (!this._reconnectTimer.running) {
      this._reconnectTimer.start(this._nextDelay);
      return this._nextDelay = Math.min(this.options.maxdelay, this._nextDelay * 2);
    }
  };

  Connector.prototype.sendCommand = function(command) {
    if (this.protocol == null) {
      return;
    }
    return this._sendCommand(command);
  };

  Connector.prototype._sendCommand = function(command) {
    return this.socket.send(JSON.stringify(command));
  };

  Connector.prototype._closeOnError = function() {
    this._handshakeTimeout.stop();
    this._disconnectionReason = 'error';
    return this.socket.close();
  };

  Connector.prototype._onopen = function(e) {
    var hello;
    this.handlers.socketConnected();
    this._disconnectionReason = 'handshake-failed';
    hello = {
      command: 'hello',
      protocols: [PROTOCOL_6, PROTOCOL_7]
    };
    hello.ver = Version;
    if (this.options.ext) {
      hello.ext = this.options.ext;
    }
    if (this.options.extver) {
      hello.extver = this.options.extver;
    }
    if (this.options.snipver) {
      hello.snipver = this.options.snipver;
    }
    this._sendCommand(hello);
    return this._handshakeTimeout.start(this.options.handshake_timeout);
  };

  Connector.prototype._onclose = function(e) {
    this.protocol = 0;
    this.handlers.disconnected(this._disconnectionReason, this._nextDelay);
    return this._scheduleReconnection();
  };

  Connector.prototype._onerror = function(e) {};

  Connector.prototype._onmessage = function(e) {
    return this.protocolParser.process(e.data);
  };

  return Connector;

})();

// timer
var Timer;
var __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };
__timer.Timer = Timer = (function() {
  function Timer(func) {
    this.func = func;
    this.running = false;
    this.id = null;
    this._handler = __bind(function() {
      this.running = false;
      this.id = null;
      return this.func();
    }, this);
  }
  Timer.prototype.start = function(timeout) {
    if (this.running) {
      clearTimeout(this.id);
    }
    this.id = setTimeout(this._handler, timeout);
    return this.running = true;
  };
  Timer.prototype.stop = function() {
    if (this.running) {
      clearTimeout(this.id);
      this.running = false;
      return this.id = null;
    }
  };
  return Timer;
})();
Timer.start = function(timeout, func) {
  return setTimeout(func, timeout);
};

// options
var Options;
__options.Options = Options = (function() {
  function Options() {
    this.host = null;
    this.port = 35729;
    this.snipver = null;
    this.ext = null;
    this.extver = null;
    this.mindelay = 1000;
    this.maxdelay = 60000;
    this.handshake_timeout = 5000;
  }
  Options.prototype.set = function(name, value) {
    switch (typeof this[name]) {
      case 'undefined':
        break;
      case 'number':
        return this[name] = +value;
      default:
        return this[name] = value;
    }
  };
  return Options;
})();
Options.extract = function(document) {
  var element, keyAndValue, m, mm, options, pair, src, _i, _j, _len, _len2, _ref, _ref2;
  _ref = document.getElementsByTagName('script');
  for (_i = 0, _len = _ref.length; _i < _len; _i++) {
    element = _ref[_i];
    if ((src = element.src) && (m = src.match(/^[^:]+:\/\/(.*)\/z?livereload\.js(?:\?(.*))?$/))) {
      options = new Options();
      if (mm = m[1].match(/^([^\/:]+)(?::(\d+))?$/)) {
        options.host = mm[1];
        if (mm[2]) {
          options.port = parseInt(mm[2], 10);
        }
      }
      if (m[2]) {
        _ref2 = m[2].split('&');
        for (_j = 0, _len2 = _ref2.length; _j < _len2; _j++) {
          pair = _ref2[_j];
          if ((keyAndValue = pair.split('=')).length > 1) {
            options.set(keyAndValue[0].replace(/-/g, '_'), keyAndValue.slice(1).join('='));
          }
        }
      }
      return options;
    }
  }
  return null;
};

// reloader
// Generated by CoffeeScript 1.3.1
(function() {
  var IMAGE_STYLES, Reloader, numberOfMatchingSegments, pathFromUrl, pathsMatch, pickBestMatch, splitUrl;

  splitUrl = function(url) {
    var hash, index, params;
    if ((index = url.indexOf('#')) >= 0) {
      hash = url.slice(index);
      url = url.slice(0, index);
    } else {
      hash = '';
    }
    if ((index = url.indexOf('?')) >= 0) {
      params = url.slice(index);
      url = url.slice(0, index);
    } else {
      params = '';
    }
    return {
      url: url,
      params: params,
      hash: hash
    };
  };

  pathFromUrl = function(url) {
    var path;
    url = splitUrl(url).url;
    if (url.indexOf('file://') === 0) {
      path = url.replace(/^file:\/\/(localhost)?/, '');
    } else {
      path = url.replace(/^([^:]+:)?\/\/([^:\/]+)(:\d*)?\//, '/');
    }
    return decodeURIComponent(path);
  };

  pickBestMatch = function(path, objects, pathFunc) {
    var bestMatch, object, score, _i, _len;
    bestMatch = {
      score: 0
    };
    for (_i = 0, _len = objects.length; _i < _len; _i++) {
      object = objects[_i];
      score = numberOfMatchingSegments(path, pathFunc(object));
      if (score > bestMatch.score) {
        bestMatch = {
          object: object,
          score: score
        };
      }
    }
    if (bestMatch.score > 0) {
      return bestMatch;
    } else {
      return null;
    }
  };

  numberOfMatchingSegments = function(path1, path2) {
    var comps1, comps2, eqCount, len;
    path1 = path1.replace(/^\/+/, '').toLowerCase();
    path2 = path2.replace(/^\/+/, '').toLowerCase();
    if (path1 === path2) {
      return 10000;
    }
    comps1 = path1.split('/').reverse();
    comps2 = path2.split('/').reverse();
    len = Math.min(comps1.length, comps2.length);
    eqCount = 0;
    while (eqCount < len && comps1[eqCount] === comps2[eqCount]) {
      ++eqCount;
    }
    return eqCount;
  };

  pathsMatch = function(path1, path2) {
    return numberOfMatchingSegments(path1, path2) > 0;
  };

  IMAGE_STYLES = [
    {
      selector: 'background',
      styleNames: ['backgroundImage']
    }, {
      selector: 'border',
      styleNames: ['borderImage', 'webkitBorderImage', 'MozBorderImage']
    }
  ];

  __reloader.Reloader = Reloader = (function() {

    Reloader.name = 'Reloader';

    function Reloader(window, console, Timer) {
      this.window = window;
      this.console = console;
      this.Timer = Timer;
      this.document = this.window.document;
      this.importCacheWaitPeriod = 200;
      this.plugins = [];
    }

    Reloader.prototype.addPlugin = function(plugin) {
      return this.plugins.push(plugin);
    };

    Reloader.prototype.analyze = function(callback) {
      return results;
    };

    Reloader.prototype.reload = function(path, options) {
      var plugin, _base, _i, _len, _ref;
      this.options = options;
      if ((_base = this.options).stylesheetReloadTimeout == null) {
        _base.stylesheetReloadTimeout = 15000;
      }
      _ref = this.plugins;
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        plugin = _ref[_i];
        if (plugin.reload && plugin.reload(path, options)) {
          return;
        }
      }
      if (options.liveCSS) {
        if (path.match(/\.css$/i)) {
          if (this.reloadStylesheet(path)) {
            return;
          }
        }
      }
      if (options.liveImg) {
        if (path.match(/\.(jpe?g|png|gif)$/i)) {
          this.reloadImages(path);
          return;
        }
      }
      return this.reloadPage();
    };

    Reloader.prototype.reloadPage = function() {
      return this.window.document.location.reload();
    };

    Reloader.prototype.reloadImages = function(path) {
      var expando, img, selector, styleNames, styleSheet, _i, _j, _k, _l, _len, _len1, _len2, _len3, _ref, _ref1, _ref2, _ref3, _results;
      expando = this.generateUniqueString();
      _ref = this.document.images;
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        img = _ref[_i];
        if (pathsMatch(path, pathFromUrl(img.src))) {
          img.src = this.generateCacheBustUrl(img.src, expando);
        }
      }
      if (this.document.querySelectorAll) {
        for (_j = 0, _len1 = IMAGE_STYLES.length; _j < _len1; _j++) {
          _ref1 = IMAGE_STYLES[_j], selector = _ref1.selector, styleNames = _ref1.styleNames;
          _ref2 = this.document.querySelectorAll("[style*=" + selector + "]");
          for (_k = 0, _len2 = _ref2.length; _k < _len2; _k++) {
            img = _ref2[_k];
            this.reloadStyleImages(img.style, styleNames, path, expando);
          }
        }
      }
      if (this.document.styleSheets) {
        _ref3 = this.document.styleSheets;
        _results = [];
        for (_l = 0, _len3 = _ref3.length; _l < _len3; _l++) {
          styleSheet = _ref3[_l];
          _results.push(this.reloadStylesheetImages(styleSheet, path, expando));
        }
        return _results;
      }
    };

    Reloader.prototype.reloadStylesheetImages = function(styleSheet, path, expando) {
      var rule, rules, styleNames, _i, _j, _len, _len1;
      try {
        rules = styleSheet != null ? styleSheet.cssRules : void 0;
      } catch (e) {

      }
      if (!rules) {
        return;
      }
      for (_i = 0, _len = rules.length; _i < _len; _i++) {
        rule = rules[_i];
        switch (rule.type) {
          case CSSRule.IMPORT_RULE:
            this.reloadStylesheetImages(rule.styleSheet, path, expando);
            break;
          case CSSRule.STYLE_RULE:
            for (_j = 0, _len1 = IMAGE_STYLES.length; _j < _len1; _j++) {
              styleNames = IMAGE_STYLES[_j].styleNames;
              this.reloadStyleImages(rule.style, styleNames, path, expando);
            }
            break;
          case CSSRule.MEDIA_RULE:
            this.reloadStylesheetImages(rule, path, expando);
        }
      }
    };

    Reloader.prototype.reloadStyleImages = function(style, styleNames, path, expando) {
      var newValue, styleName, value, _i, _len,
        _this = this;
      for (_i = 0, _len = styleNames.length; _i < _len; _i++) {
        styleName = styleNames[_i];
        value = style[styleName];
        if (typeof value === 'string') {
          newValue = value.replace(/\burl\s*\(([^)]*)\)/, function(match, src) {
            if (pathsMatch(path, pathFromUrl(src))) {
              return "url(" + (_this.generateCacheBustUrl(src, expando)) + ")";
            } else {
              return match;
            }
          });
          if (newValue !== value) {
            style[styleName] = newValue;
          }
        }
      }
    };

    Reloader.prototype.reloadStylesheet = function(path) {
      var imported, link, links, match, style, _i, _j, _k, _l, _len, _len1, _len2, _len3, _ref, _ref1,
        _this = this;
      links = (function() {
        var _i, _len, _ref, _results;
        _ref = this.document.getElementsByTagName('link');
        _results = [];
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          link = _ref[_i];
          if (link.rel === 'stylesheet' && !link.__LiveReload_pendingRemoval) {
            _results.push(link);
          }
        }
        return _results;
      }).call(this);
      imported = [];
      _ref = this.document.getElementsByTagName('style');
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        style = _ref[_i];
        if (style.sheet) {
          this.collectImportedStylesheets(style, style.sheet, imported);
        }
      }
      for (_j = 0, _len1 = links.length; _j < _len1; _j++) {
        link = links[_j];
        this.collectImportedStylesheets(link, link.sheet, imported);
      }
      if (this.window.StyleFix && this.document.querySelectorAll) {
        _ref1 = this.document.querySelectorAll('style[data-href]');
        for (_k = 0, _len2 = _ref1.length; _k < _len2; _k++) {
          style = _ref1[_k];
          links.push(style);
        }
      }
      this.console.log("LiveReload found " + links.length + " LINKed stylesheets, " + imported.length + " @imported stylesheets");
      match = pickBestMatch(path, links.concat(imported), function(l) {
        return pathFromUrl(_this.linkHref(l));
      });
      if (match) {
        if (match.object.rule) {
          this.console.log("LiveReload is reloading imported stylesheet: " + match.object.href);
          this.reattachImportedRule(match.object);
        } else {
          this.console.log("LiveReload is reloading stylesheet: " + (this.linkHref(match.object)));
          this.reattachStylesheetLink(match.object);
        }
      } else {
        this.console.log("LiveReload will reload all stylesheets because path '" + path + "' did not match any specific one");
        for (_l = 0, _len3 = links.length; _l < _len3; _l++) {
          link = links[_l];
          this.reattachStylesheetLink(link);
        }
      }
      return true;
    };

    Reloader.prototype.collectImportedStylesheets = function(link, styleSheet, result) {
      var index, rule, rules, _i, _len;
      try {
        rules = styleSheet != null ? styleSheet.cssRules : void 0;
      } catch (e) {

      }
      if (rules && rules.length) {
        for (index = _i = 0, _len = rules.length; _i < _len; index = ++_i) {
          rule = rules[index];
          switch (rule.type) {
            case CSSRule.CHARSET_RULE:
              continue;
            case CSSRule.IMPORT_RULE:
              result.push({
                link: link,
                rule: rule,
                index: index,
                href: rule.href
              });
              this.collectImportedStylesheets(link, rule.styleSheet, result);
              break;
            default:
              break;
          }
        }
      }
    };

    Reloader.prototype.waitUntilCssLoads = function(clone, func) {
      var callbackExecuted, executeCallback, poll,
        _this = this;
      callbackExecuted = false;
      executeCallback = function() {
        if (callbackExecuted) {
          return;
        }
        callbackExecuted = true;
        return func();
      };
      clone.onload = function() {
        console.log("onload!");
        _this.knownToSupportCssOnLoad = true;
        return executeCallback();
      };
      if (!this.knownToSupportCssOnLoad) {
        (poll = function() {
          if (clone.sheet) {
            console.log("polling!");
            return executeCallback();
          } else {
            return _this.Timer.start(50, poll);
          }
        })();
      }
      return this.Timer.start(this.options.stylesheetReloadTimeout, executeCallback);
    };

    Reloader.prototype.linkHref = function(link) {
      return link.href || link.getAttribute('data-href');
    };

    Reloader.prototype.reattachStylesheetLink = function(link) {
      var clone, parent,
        _this = this;
      if (link.__LiveReload_pendingRemoval) {
        return;
      }
      link.__LiveReload_pendingRemoval = true;
      if (link.tagName === 'STYLE') {
        clone = this.document.createElement('link');
        clone.rel = 'stylesheet';
        clone.media = link.media;
        clone.disabled = link.disabled;
      } else {
        clone = link.cloneNode(false);
      }
      clone.href = this.generateCacheBustUrl(this.linkHref(link));
      parent = link.parentNode;
      if (parent.lastChild === link) {
        parent.appendChild(clone);
      } else {
        parent.insertBefore(clone, link.nextSibling);
      }
      return this.waitUntilCssLoads(clone, function() {
        var additionalWaitingTime;
        if (/AppleWebKit/.test(navigator.userAgent)) {
          additionalWaitingTime = 5;
        } else {
          additionalWaitingTime = 200;
        }
        return _this.Timer.start(additionalWaitingTime, function() {
          var _ref;
          if (!link.parentNode) {
            return;
          }
          link.parentNode.removeChild(link);
          clone.onreadystatechange = null;
          return (_ref = _this.window.StyleFix) != null ? _ref.link(clone) : void 0;
        });
      });
    };

    Reloader.prototype.reattachImportedRule = function(_arg) {
      var href, index, link, media, newRule, parent, rule, tempLink,
        _this = this;
      rule = _arg.rule, index = _arg.index, link = _arg.link;
      parent = rule.parentStyleSheet;
      href = this.generateCacheBustUrl(rule.href);
      media = rule.media.length ? [].join.call(rule.media, ', ') : '';
      newRule = "@import url(\"" + href + "\") " + media + ";";
      rule.__LiveReload_newHref = href;
      tempLink = this.document.createElement("link");
      tempLink.rel = 'stylesheet';
      tempLink.href = href;
      tempLink.__LiveReload_pendingRemoval = true;
      if (link.parentNode) {
        link.parentNode.insertBefore(tempLink, link);
      }
      return this.Timer.start(this.importCacheWaitPeriod, function() {
        if (tempLink.parentNode) {
          tempLink.parentNode.removeChild(tempLink);
        }
        if (rule.__LiveReload_newHref !== href) {
          return;
        }
        parent.insertRule(newRule, index);
        parent.deleteRule(index + 1);
        rule = parent.cssRules[index];
        rule.__LiveReload_newHref = href;
        return _this.Timer.start(_this.importCacheWaitPeriod, function() {
          if (rule.__LiveReload_newHref !== href) {
            return;
          }
          parent.insertRule(newRule, index);
          return parent.deleteRule(index + 1);
        });
      });
    };

    Reloader.prototype.generateUniqueString = function() {
      return 'livereload=' + Date.now();
    };

    Reloader.prototype.generateCacheBustUrl = function(url, expando) {
      var hash, oldParams, params, _ref;
      if (expando == null) {
        expando = this.generateUniqueString();
      }
      _ref = splitUrl(url), url = _ref.url, hash = _ref.hash, oldParams = _ref.params;
      if (this.options.overrideURL) {
        if (url.indexOf(this.options.serverURL) < 0) {
          url = this.options.serverURL + this.options.overrideURL + "?url=" + encodeURIComponent(url);
        }
      }
      params = oldParams.replace(/(\?|&)livereload=(\d+)/, function(match, sep) {
        return "" + sep + expando;
      });
      if (params === oldParams) {
        if (oldParams.length === 0) {
          params = "?" + expando;
        } else {
          params = "" + oldParams + "&" + expando;
        }
      }
      return url + params + hash;
    };

    return Reloader;

  })();

}).call(this);

// livereload
var Connector, LiveReload, Options, Reloader, Timer;

Connector = __connector.Connector;

Timer = __timer.Timer;

Options = __options.Options;

Reloader = __reloader.Reloader;

__livereload.LiveReload = LiveReload = (function() {

  function LiveReload(window) {
    var _this = this;
    this.window = window;
    this.listeners = {};
    this.plugins = [];
    this.pluginIdentifiers = {};
    this.console = this.window.location.href.match(/LR-verbose/) && this.window.console && this.window.console.log && this.window.console.error ? this.window.console : {
      log: function() {},
      error: function() {}
    };
    if (!(this.WebSocket = this.window.WebSocket || this.window.MozWebSocket)) {
      console.error("LiveReload disabled because the browser does not seem to support web sockets");
      return;
    }
    if (!(this.options = Options.extract(this.window.document))) {
      console.error("LiveReload disabled because it could not find its own <SCRIPT> tag");
      return;
    }
    this.reloader = new Reloader(this.window, this.console, Timer);
    this.connector = new Connector(this.options, this.WebSocket, Timer, {
      connecting: function() {},
      socketConnected: function() {},
      connected: function(protocol) {
        var _base;
        if (typeof (_base = _this.listeners).connect === "function") {
          _base.connect();
        }
        _this.log("LiveReload is connected to " + _this.options.host + ":" + _this.options.port + " (protocol v" + protocol + ").");
        return _this.analyze();
      },
      error: function(e) {
        if (e instanceof ProtocolError) {
          return console.log("" + e.message + ".");
        } else {
          return console.log("LiveReload internal error: " + e.message);
        }
      },
      disconnected: function(reason, nextDelay) {
        var _base;
        if (typeof (_base = _this.listeners).disconnect === "function") {
          _base.disconnect();
        }
        switch (reason) {
          case 'cannot-connect':
            return _this.log("LiveReload cannot connect to " + _this.options.host + ":" + _this.options.port + ", will retry in " + nextDelay + " sec.");
          case 'broken':
            return _this.log("LiveReload disconnected from " + _this.options.host + ":" + _this.options.port + ", reconnecting in " + nextDelay + " sec.");
          case 'handshake-timeout':
            return _this.log("LiveReload cannot connect to " + _this.options.host + ":" + _this.options.port + " (handshake timeout), will retry in " + nextDelay + " sec.");
          case 'handshake-failed':
            return _this.log("LiveReload cannot connect to " + _this.options.host + ":" + _this.options.port + " (handshake failed), will retry in " + nextDelay + " sec.");
          case 'manual':
            break;
          case 'error':
            break;
          default:
            return _this.log("LiveReload disconnected from " + _this.options.host + ":" + _this.options.port + " (" + reason + "), reconnecting in " + nextDelay + " sec.");
        }
      },
      message: function(message) {
        switch (message.command) {
          case 'reload':
            return _this.performReload(message);
          case 'alert':
            return _this.performAlert(message);
        }
      }
    });
  }

  LiveReload.prototype.on = function(eventName, handler) {
    return this.listeners[eventName] = handler;
  };

  LiveReload.prototype.log = function(message) {
    return this.console.log("" + message);
  };

  LiveReload.prototype.performReload = function(message) {
    var _ref, _ref2;
    this.log("LiveReload received reload request for " + message.path + ".");
    return this.reloader.reload(message.path, {
      liveCSS: (_ref = message.liveCSS) != null ? _ref : true,
      liveImg: (_ref2 = message.liveImg) != null ? _ref2 : true,
      originalPath: message.originalPath || '',
      overrideURL: message.overrideURL || '',
      serverURL: "http://" + this.options.host + ":" + this.options.port
    });
  };

  LiveReload.prototype.performAlert = function(message) {
    return alert(message.message);
  };

  LiveReload.prototype.shutDown = function() {
    var _base;
    this.connector.disconnect();
    this.log("LiveReload disconnected.");
    return typeof (_base = this.listeners).shutdown === "function" ? _base.shutdown() : void 0;
  };

  LiveReload.prototype.hasPlugin = function(identifier) {
    return !!this.pluginIdentifiers[identifier];
  };

  LiveReload.prototype.addPlugin = function(pluginClass) {
    var plugin;
    var _this = this;
    if (this.hasPlugin(pluginClass.identifier)) return;
    this.pluginIdentifiers[pluginClass.identifier] = true;
    plugin = new pluginClass(this.window, {
      _livereload: this,
      _reloader: this.reloader,
      _connector: this.connector,
      console: this.console,
      Timer: Timer,
      generateCacheBustUrl: function(url) {
        return _this.reloader.generateCacheBustUrl(url);
      }
    });
    this.plugins.push(plugin);
    this.reloader.addPlugin(plugin);
  };

  LiveReload.prototype.analyze = function() {
    var plugin, pluginData, pluginsData, _i, _len, _ref;
    if (!(this.connector.protocol >= 7)) return;
    pluginsData = {};
    _ref = this.plugins;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      plugin = _ref[_i];
      pluginsData[plugin.constructor.identifier] = pluginData = (typeof plugin.analyze === "function" ? plugin.analyze() : void 0) || {};
      pluginData.version = plugin.constructor.version;
    }
    this.connector.sendCommand({
      command: 'info',
      plugins: pluginsData,
      url: this.window.location.href
    });
  };

  return LiveReload;

})();

// less
var LessPlugin;
__less = LessPlugin = (function() {
  LessPlugin.identifier = 'less';
  LessPlugin.version = '1.0';
  function LessPlugin(window, host) {
    this.window = window;
    this.host = host;
  }
  LessPlugin.prototype.reload = function(path, options) {
    if (this.window.less && this.window.less.refresh) {
      if (path.match(/\.less$/i)) {
        return this.reloadLess(path);
      }
      if (options.originalPath.match(/\.less$/i)) {
        return this.reloadLess(options.originalPath);
      }
    }
    return false;
  };
  LessPlugin.prototype.reloadLess = function(path) {
    var link, links, _i, _len;
    links = (function() {
      var _i, _len, _ref, _results;
      _ref = document.getElementsByTagName('link');
      _results = [];
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        link = _ref[_i];
        if (link.href && link.rel === 'stylesheet/less' || (link.rel.match(/stylesheet/) && link.type.match(/^text\/(x-)?less$/))) {
          _results.push(link);
        }
      }
      return _results;
    })();
    if (links.length === 0) {
      return false;
    }
    for (_i = 0, _len = links.length; _i < _len; _i++) {
      link = links[_i];
      link.href = this.host.generateCacheBustUrl(link.href);
    }
    this.host.console.log("LiveReload is asking LESS to recompile all stylesheets");
    this.window.less.refresh(true);
    return true;
  };
  LessPlugin.prototype.analyze = function() {
    return {
      disable: !!(this.window.less && this.window.less.refresh)
    };
  };
  return LessPlugin;
})();

// startup
var CustomEvents, LiveReload, k;
CustomEvents = __customevents;
LiveReload = window.LiveReload = new (__livereload.LiveReload)(window);
for (k in window) {
  if (k.match(/^LiveReloadPlugin/)) {
    LiveReload.addPlugin(window[k]);
  }
}
LiveReload.addPlugin(__less);
LiveReload.on('shutdown', function() {
  return delete window.LiveReload;
});
LiveReload.on('connect', function() {
  return CustomEvents.fire(document, 'LiveReloadConnect');
});
LiveReload.on('disconnect', function() {
  return CustomEvents.fire(document, 'LiveReloadDisconnect');
});
CustomEvents.bind(document, 'LiveReloadShutDown', function() {
  return LiveReload.shutDown();
});
})();

var QRCode;(function(){function d(y){this.mode=c.MODE_8BIT_BYTE;this.data=y;this.parsedData=[];for(var w=0,v=this.data.length;w<v;w++){var u=[];var x=this.data.charCodeAt(w);
if(x>65536){u[0]=240|((x&1835008)>>>18);u[1]=128|((x&258048)>>>12);u[2]=128|((x&4032)>>>6);u[3]=128|(x&63);}else{if(x>2048){u[0]=224|((x&61440)>>>12);u[1]=128|((x&4032)>>>6);
u[2]=128|(x&63);}else{if(x>128){u[0]=192|((x&1984)>>>6);u[1]=128|(x&63);}else{u[0]=x;}}}this.parsedData.push(u);}this.parsedData=Array.prototype.concat.apply([],this.parsedData);
if(this.parsedData.length!=this.data.length){this.parsedData.unshift(191);this.parsedData.unshift(187);this.parsedData.unshift(239);}}d.prototype={getLength:function(i){return this.parsedData.length;
},write:function(v){for(var w=0,u=this.parsedData.length;w<u;w++){v.put(this.parsedData[w],8);}}};function r(u,i){this.typeNumber=u;this.errorCorrectLevel=i;
this.modules=null;this.moduleCount=0;this.dataCache=null;this.dataList=[];}function p(v,u){if(v.length==undefined){throw new Error(v.length+"/"+u);}var x=0;
while(x<v.length&&v[x]==0){x++;}this.num=new Array(v.length-x+u);for(var w=0;w<v.length-x;w++){this.num[w]=v[w+x];}}function q(i,u){this.totalCount=i,this.dataCount=u;
}function l(){this.buffer=[],this.length=0;}r.prototype={addData:function(u){var i=new d(u);this.dataList.push(i),this.dataCache=null;},isDark:function(u,i){if(u<0||this.moduleCount<=u||i<0||this.moduleCount<=i){throw new Error(u+","+i);
}return this.modules[u][i];},getModuleCount:function(){return this.moduleCount;},make:function(){this.makeImpl(!1,this.getBestMaskPattern());},makeImpl:function(w,v){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);
for(var u=0;u<this.moduleCount;u++){this.modules[u]=new Array(this.moduleCount);for(var i=0;i<this.moduleCount;i++){this.modules[u][i]=null;}}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(w,v),this.typeNumber>=7&&this.setupTypeNumber(w),this.dataCache==null&&(this.dataCache=r.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,v);
},setupPositionProbePattern:function(v,i){for(var u=-1;u<=7;u++){if(v+u<=-1||this.moduleCount<=v+u){continue;}for(var w=-1;w<=7;w++){if(i+w<=-1||this.moduleCount<=i+w){continue;
}0<=u&&u<=6&&(w==0||w==6)||0<=w&&w<=6&&(u==0||u==6)||2<=u&&u<=4&&2<=w&&w<=4?this.modules[v+u][i+w]=!0:this.modules[v+u][i+w]=!1;}}},getBestMaskPattern:function(){var x=0,w=0;
for(var v=0;v<8;v++){this.makeImpl(!0,v);var u=k.getLostPoint(this);if(v==0||x>u){x=u,w=v;}}return w;},createMovieClip:function(z,i,v){var D=z.createEmptyMovieClip(i,v),w=1;
this.make();for(var E=0;E<this.modules.length;E++){var B=E*w;for(var u=0;u<this.modules[E].length;u++){var C=u*w,A=this.modules[E][u];A&&(D.beginFill(0,100),D.moveTo(C,B),D.lineTo(C+w,B),D.lineTo(C+w,B+w),D.lineTo(C,B+w),D.endFill());
}}return D;},setupTimingPattern:function(){for(var i=8;i<this.moduleCount-8;i++){if(this.modules[i][6]!=null){continue;}this.modules[i][6]=i%2==0;}for(var u=8;
u<this.moduleCount-8;u++){if(this.modules[6][u]!=null){continue;}this.modules[6][u]=u%2==0;}},setupPositionAdjustPattern:function(){var A=k.getPatternPosition(this.typeNumber);
for(var w=0;w<A.length;w++){for(var v=0;v<A.length;v++){var y=A[w],u=A[v];if(this.modules[y][u]!=null){continue;}for(var x=-2;x<=2;x++){for(var z=-2;z<=2;
z++){x==-2||x==2||z==-2||z==2||x==0&&z==0?this.modules[y+x][u+z]=!0:this.modules[y+x][u+z]=!1;}}}}},setupTypeNumber:function(x){var w=k.getBCHTypeNumber(this.typeNumber);
for(var v=0;v<18;v++){var u=!x&&(w>>v&1)==1;this.modules[Math.floor(v/3)][v%3+this.moduleCount-8-3]=u;}for(var v=0;v<18;v++){var u=!x&&(w>>v&1)==1;this.modules[v%3+this.moduleCount-8-3][Math.floor(v/3)]=u;
}},setupTypeInfo:function(z,y){var x=this.errorCorrectLevel<<3|y,w=k.getBCHTypeInfo(x);for(var v=0;v<15;v++){var u=!z&&(w>>v&1)==1;v<6?this.modules[v][8]=u:v<8?this.modules[v+1][8]=u:this.modules[this.moduleCount-15+v][8]=u;
}for(var v=0;v<15;v++){var u=!z&&(w>>v&1)==1;v<8?this.modules[8][this.moduleCount-v-1]=u:v<9?this.modules[8][15-v-1+1]=u:this.modules[8][15-v-1]=u;}this.modules[this.moduleCount-8][8]=!z;
},mapData:function(y,u){var w=-1,C=this.moduleCount-1,x=7,i=0;for(var v=this.moduleCount-1;v>0;v-=2){v==6&&v--;for(;;){for(var A=0;A<2;A++){if(this.modules[C][v-A]==null){var z=!1;
i<y.length&&(z=(y[i]>>>x&1)==1);var B=k.getMask(u,C,v-A);B&&(z=!z),this.modules[C][v-A]=z,x--,x==-1&&(i++,x=7);}}C+=w;if(C<0||this.moduleCount<=C){C-=w,w=-w;
break;}}}}},r.PAD0=236,r.PAD1=17,r.createData=function(B,A,x){var v=q.getRSBlocks(B,A),u=new l;for(var w=0;w<x.length;w++){var z=x[w];u.put(z.mode,4),u.put(z.getLength(),k.getLengthInBits(z.mode,B)),z.write(u);
}var y=0;for(var w=0;w<v.length;w++){y+=v[w].dataCount;}if(u.getLengthInBits()>y*8){throw new Error("code length overflow. ("+u.getLengthInBits()+">"+y*8+")");
}u.getLengthInBits()+4<=y*8&&u.put(0,4);while(u.getLengthInBits()%8!=0){u.putBit(!1);}for(;;){if(u.getLengthInBits()>=y*8){break;}u.put(r.PAD0,8);if(u.getLengthInBits()>=y*8){break;
}u.put(r.PAD1,8);}return r.createBytes(u,v);},r.createBytes=function(E,H){var w=0,K=0,I=0,v=new Array(H.length),z=new Array(H.length);for(var C=0;C<H.length;
C++){var D=H[C].dataCount,u=H[C].totalCount-D;K=Math.max(K,D),I=Math.max(I,u),v[C]=new Array(D);for(var F=0;F<v[C].length;F++){v[C][F]=255&E.buffer[F+w];
}w+=D;var A=k.getErrorCorrectPolynomial(u),J=new p(v[C],A.getLength()-1),x=J.mod(A);z[C]=new Array(A.getLength()-1);for(var F=0;F<z[C].length;F++){var B=F+x.getLength()-z[C].length;
z[C][F]=B>=0?x.get(B):0;}}var G=0;for(var F=0;F<H.length;F++){G+=H[F].totalCount;}var L=new Array(G),y=0;for(var F=0;F<K;F++){for(var C=0;C<H.length;C++){F<v[C].length&&(L[y++]=v[C][F]);
}}for(var F=0;F<I;F++){for(var C=0;C<H.length;C++){F<z[C].length&&(L[y++]=z[C][F]);}}return L;};var c={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},f={L:1,M:0,Q:3,H:2},t={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},k={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(i){var u=i<<10;
while(k.getBCHDigit(u)-k.getBCHDigit(k.G15)>=0){u^=k.G15<<k.getBCHDigit(u)-k.getBCHDigit(k.G15);}return(i<<10|u)^k.G15_MASK;},getBCHTypeNumber:function(i){var u=i<<12;
while(k.getBCHDigit(u)-k.getBCHDigit(k.G18)>=0){u^=k.G18<<k.getBCHDigit(u)-k.getBCHDigit(k.G18);}return i<<12|u;},getBCHDigit:function(i){var u=0;while(i!=0){u++,i>>>=1;
}return u;},getPatternPosition:function(i){return k.PATTERN_POSITION_TABLE[i-1];},getMask:function(w,v,u){switch(w){case t.PATTERN000:return(v+u)%2==0;
case t.PATTERN001:return v%2==0;case t.PATTERN010:return u%3==0;case t.PATTERN011:return(v+u)%3==0;case t.PATTERN100:return(Math.floor(v/2)+Math.floor(u/3))%2==0;
case t.PATTERN101:return v*u%2+v*u%3==0;case t.PATTERN110:return(v*u%2+v*u%3)%2==0;case t.PATTERN111:return(v*u%3+(v+u)%2)%2==0;default:throw new Error("bad maskPattern:"+w);
}},getErrorCorrectPolynomial:function(v){var u=new p([1],0);for(var w=0;w<v;w++){u=u.multiply(new p([1,o.gexp(w)],0));}return u;},getLengthInBits:function(u,i){if(1<=i&&i<10){switch(u){case c.MODE_NUMBER:return 10;
case c.MODE_ALPHA_NUM:return 9;case c.MODE_8BIT_BYTE:return 8;case c.MODE_KANJI:return 8;default:throw new Error("mode:"+u);}}else{if(i<27){switch(u){case c.MODE_NUMBER:return 12;
case c.MODE_ALPHA_NUM:return 11;case c.MODE_8BIT_BYTE:return 16;case c.MODE_KANJI:return 10;default:throw new Error("mode:"+u);}}else{if(!(i<41)){throw new Error("type:"+i);
}switch(u){case c.MODE_NUMBER:return 14;case c.MODE_ALPHA_NUM:return 13;case c.MODE_8BIT_BYTE:return 16;case c.MODE_KANJI:return 12;default:throw new Error("mode:"+u);
}}}},getLostPoint:function(u){var w=u.getModuleCount(),x=0;for(var E=0;E<w;E++){for(var v=0;v<w;v++){var C=0,B=u.isDark(E,v);for(var i=-1;i<=1;i++){if(E+i<0||w<=E+i){continue;
}for(var A=-1;A<=1;A++){if(v+A<0||w<=v+A){continue;}if(i==0&&A==0){continue;}B==u.isDark(E+i,v+A)&&C++;}}C>5&&(x+=3+C-5);}}for(var E=0;E<w-1;E++){for(var v=0;
v<w-1;v++){var y=0;u.isDark(E,v)&&y++,u.isDark(E+1,v)&&y++,u.isDark(E,v+1)&&y++,u.isDark(E+1,v+1)&&y++;if(y==0||y==4){x+=3;}}}for(var E=0;E<w;E++){for(var v=0;
v<w-6;v++){u.isDark(E,v)&&!u.isDark(E,v+1)&&u.isDark(E,v+2)&&u.isDark(E,v+3)&&u.isDark(E,v+4)&&!u.isDark(E,v+5)&&u.isDark(E,v+6)&&(x+=40);}}for(var v=0;
v<w;v++){for(var E=0;E<w-6;E++){u.isDark(E,v)&&!u.isDark(E+1,v)&&u.isDark(E+2,v)&&u.isDark(E+3,v)&&u.isDark(E+4,v)&&!u.isDark(E+5,v)&&u.isDark(E+6,v)&&(x+=40);
}}var D=0;for(var v=0;v<w;v++){for(var E=0;E<w;E++){u.isDark(E,v)&&D++;}}var z=Math.abs(100*D/w/w-50)/5;return x+=z*10,x;}},o={glog:function(i){if(i<1){throw new Error("glog("+i+")");
}return o.LOG_TABLE[i];},gexp:function(i){while(i<0){i+=255;}while(i>=256){i-=255;}return o.EXP_TABLE[i];},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};
for(var n=0;n<8;n++){o.EXP_TABLE[n]=1<<n;}for(var n=8;n<256;n++){o.EXP_TABLE[n]=o.EXP_TABLE[n-4]^o.EXP_TABLE[n-5]^o.EXP_TABLE[n-6]^o.EXP_TABLE[n-8];}for(var n=0;
n<255;n++){o.LOG_TABLE[o.EXP_TABLE[n]]=n;}p.prototype={get:function(i){return this.num[i];},getLength:function(){return this.num.length;},multiply:function(x){var v=new Array(this.getLength()+x.getLength()-1);
for(var w=0;w<this.getLength();w++){for(var u=0;u<x.getLength();u++){v[w+u]^=o.gexp(o.glog(this.get(w))+o.glog(x.get(u)));}}return new p(v,0);},mod:function(x){if(this.getLength()-x.getLength()<0){return this;
}var w=o.glog(this.get(0))-o.glog(x.get(0)),u=new Array(this.getLength());for(var v=0;v<this.getLength();v++){u[v]=this.get(v);}for(var v=0;v<x.getLength();
v++){u[v]^=o.gexp(o.glog(x.get(v))+w);}return(new p(u,0)).mod(x);}},q.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],q.getRSBlocks=function(w,C){var v=q.getRsBlockTable(w,C);
if(v==undefined){throw new Error("bad rs block @ typeNumber:"+w+"/errorCorrectLevel:"+C);}var u=v.length/3,A=[];for(var y=0;y<u;y++){var z=v[y*3+0],D=v[y*3+1],B=v[y*3+2];
for(var x=0;x<z;x++){A.push(new q(D,B));}}return A;},q.getRsBlockTable=function(u,i){switch(i){case f.L:return q.RS_BLOCK_TABLE[(u-1)*4+0];case f.M:return q.RS_BLOCK_TABLE[(u-1)*4+1];
case f.Q:return q.RS_BLOCK_TABLE[(u-1)*4+2];case f.H:return q.RS_BLOCK_TABLE[(u-1)*4+3];default:return undefined;}},l.prototype={get:function(i){var u=Math.floor(i/8);
return(this.buffer[u]>>>7-i%8&1)==1;},put:function(u,w){for(var v=0;v<w;v++){this.putBit((u>>>w-v-1&1)==1);}},getLengthInBits:function(){return this.length;
},putBit:function(u){var i=Math.floor(this.length/8);this.buffer.length<=i&&this.buffer.push(0),u&&(this.buffer[i]|=128>>>this.length%8),this.length++;
}};var m=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];
function s(){return typeof CanvasRenderingContext2D!="undefined";}function g(){var i=false;var u=navigator.userAgent;if(/android/i.test(u)){i=true;aMat=u.toString().match(/android ([0-9]\.[0-9])/i);
if(aMat&&aMat[1]){i=parseFloat(aMat[1]);}}return i;}var e=(function(){var i=function(u,v){this._el=u;this._htOption=v;};i.prototype.draw=function(x){var E=this._htOption;
var C=this._el;var u=x.getModuleCount();var A=Math.floor(E.width/u);var B=Math.floor(E.height/u);this.clear();function y(F,H){var I=document.createElementNS("http://www.w3.org/2000/svg",F);
for(var G in H){if(H.hasOwnProperty(G)){I.setAttribute(G,H[G]);}}return I;}var z=y("svg",{viewBox:"0 0 "+String(u)+" "+String(u),width:"100%",height:"100%",fill:E.colorLight});
z.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink");C.appendChild(z);z.appendChild(y("rect",{fill:E.colorDark,width:"1",height:"1",id:"template"}));
for(var D=0;D<u;D++){for(var w=0;w<u;w++){if(x.isDark(D,w)){var v=y("use",{x:String(D),y:String(w)});v.setAttributeNS("http://www.w3.org/1999/xlink","href","#template");
z.appendChild(v);}}}};i.prototype.clear=function(){while(this._el.hasChildNodes()){this._el.removeChild(this._el.lastChild);}};return i;})();var b=document.documentElement.tagName.toLowerCase()==="svg";
var h=b?e:!s()?(function(){var i=function(u,v){this._el=u;this._htOption=v;};i.prototype.draw=function(y){var F=this._htOption;var C=this._el;var u=y.getModuleCount();
var z=Math.floor(F.width/u);var B=Math.floor(F.height/u);var D=['<table style="border:0;border-collapse:collapse;">'];for(var E=0;E<u;E++){D.push("<tr>");
for(var w=0;w<u;w++){D.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+z+"px;height:"+B+"px;background-color:"+(y.isDark(E,w)?F.colorDark:F.colorLight)+';"></td>');
}D.push("</tr>");}D.push("</table>");C.innerHTML=D.join("");var A=C.childNodes[0];var x=(F.width-A.offsetWidth)/2;var v=(F.height-A.offsetHeight)/2;if(x>0&&v>0){A.style.margin=v+"px "+x+"px";
}};i.prototype.clear=function(){this._el.innerHTML="";};return i;})():(function(){function i(){this._elImage.src=this._elCanvas.toDataURL("image/png");
this._elImage.style.display="block";this._elCanvas.style.display="none";}if(this._android&&this._android<=2.1){var v=1/window.devicePixelRatio;var w=CanvasRenderingContext2D.prototype.drawImage;
CanvasRenderingContext2D.prototype.drawImage=function(z,E,D,F,B,H,G,y,C){if(("nodeName" in z)&&/img/i.test(z.nodeName)){for(var A=arguments.length-1;A>=1;
A--){arguments[A]=arguments[A]*v;}}else{if(typeof y=="undefined"){arguments[1]*=v;arguments[2]*=v;arguments[3]*=v;arguments[4]*=v;}}w.apply(this,arguments);
};}function x(y,C){var z=this;z._fFail=C;z._fSuccess=y;if(z._bSupportDataURI===null){var B=document.createElement("img");var D=function(){z._bSupportDataURI=false;
if(z._fFail){_fFail.call(z);}};var A=function(){z._bSupportDataURI=true;if(z._fSuccess){z._fSuccess.call(z);}};B.onabort=D;B.onerror=D;B.onload=A;B.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==";
return;}else{if(z._bSupportDataURI===true&&z._fSuccess){z._fSuccess.call(z);}else{if(z._bSupportDataURI===false&&z._fFail){z._fFail.call(z);}}}}var u=function(y,z){this._bIsPainted=false;
this._android=g();this._htOption=z;this._elCanvas=document.createElement("canvas");this._elCanvas.width=z.width;this._elCanvas.height=z.height;y.appendChild(this._elCanvas);
this._el=y;this._oContext=this._elCanvas.getContext("2d");this._bIsPainted=false;this._elImage=document.createElement("img");this._elImage.alt="Scan me!";
this._elImage.style.display="none";this._el.appendChild(this._elImage);this._bSupportDataURI=null;};u.prototype.draw=function(D){var L=this._elImage;var I=this._oContext;
var K=this._htOption;var A=D.getModuleCount();var F=K.width/A;var G=K.height/A;var B=Math.round(F);var H=Math.round(G);L.style.display="none";this.clear();
for(var J=0;J<A;J++){for(var C=0;C<A;C++){var E=D.isDark(J,C);var y=C*F;var z=J*G;I.strokeStyle=E?K.colorDark:K.colorLight;I.lineWidth=1;I.fillStyle=E?K.colorDark:K.colorLight;
I.fillRect(y,z,F,G);I.strokeRect(Math.floor(y)+0.5,Math.floor(z)+0.5,B,H);I.strokeRect(Math.ceil(y)-0.5,Math.ceil(z)-0.5,B,H);}}this._bIsPainted=true;};
u.prototype.makeImage=function(){if(this._bIsPainted){x.call(this,i);}};u.prototype.isPainted=function(){return this._bIsPainted;};u.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height);
this._bIsPainted=false;};u.prototype.round=function(y){if(!y){return y;}return Math.floor(y*1000)/1000;};return u;})();function a(w,y){var v=1;var z=j(w);
for(var x=0,u=m.length;x<=u;x++){var A=0;switch(y){case f.L:A=m[x][0];break;case f.M:A=m[x][1];break;case f.Q:A=m[x][2];break;case f.H:A=m[x][3];break;
}if(z<=A){break;}else{v++;}}if(v>m.length){throw new Error("Too long data");}return v;}function j(u){var i=encodeURI(u).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");
return i.length+(i.length!=u?3:0);}QRCode=function(v,w){this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:f.H};
if(typeof w==="string"){w={text:w};}if(w){for(var u in w){this._htOption[u]=w[u];}}if(typeof v=="string"){v=document.getElementById(v);}this._android=g();
this._el=v;this._oQRCode=null;this._oDrawing=new h(this._el,this._htOption);if(this._htOption.text){this.makeCode(this._htOption.text);}};QRCode.prototype.makeCode=function(i){this._oQRCode=new r(a(i,this._htOption.correctLevel),this._htOption.correctLevel);
this._oQRCode.addData(i);this._oQRCode.make();this._el.title=i;this._oDrawing.draw(this._oQRCode);this.makeImage();};QRCode.prototype.makeImage=function(){if(typeof this._oDrawing.makeImage=="function"&&(!this._android||this._android>=3)){this._oDrawing.makeImage();
}};QRCode.prototype.clear=function(){this._oDrawing.clear();};QRCode.CorrectLevel=f;})();

(function() {//生成二维码
var qrcodeEl = null;
function makeImg() {
    var qrcode = new QRCode(qrcodeEl, {
         width : 96,//设置宽高
         height : 96
    });
	  qrcode.makeCode(top.location.href);
}

function appendHtml(callback) {
    if (qrcodeEl){
      if (qrcodeEl.style.display === 'block') {
        qrcodeEl.style.display = 'none';
      } else {
        qrcodeEl.style.display = 'block';
      }
      return;
    }
    qrcodeEl = document.createElement('div');
    qrcodeEl.style.cssText = 'display: block;z-index: 10000000;position: fixed;top: 0; left: 0;width: 100%;height: 100%';
    document.getElementsByTagName('body')[0].appendChild(qrcodeEl);
    makeImg();
}

window.onkeyup = function(e) {
  if (e.keyCode === 90 && e.shiftKey && e.ctrlKey) {//ctrl + shift + z
    appendHtml();
  }
};
})();